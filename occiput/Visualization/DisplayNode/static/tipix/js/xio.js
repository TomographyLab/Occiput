/** @license Copyright (c) 2013 The X Toolkit Developers <dev@goXTK.com>, http://goXTK.com, MIT licensed. **/(function() {function h(){return function(){}}function aa(a){return function(){return this[a]}}var m,ga=ga||{},s=this;function ha(){}
function ia(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function u(a){return"array"==ia(a)}function ja(a){var b=ia(a);return"array"==b||"object"==b&&"number"==typeof a.length}function v(a){return"string"==typeof a}function w(a){return a[ka]||(a[ka]=++la)}var ka="closure_uid_"+(1E9*Math.random()>>>0),la=0;function ma(a,b,c){return a.call.apply(a.bind,arguments)}
function na(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function x(a,b,c){x=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ma:na;return x.apply(null,arguments)}var oa=Date.now||function(){return+new Date};
function y(a,b){var c=a.split("."),d=s;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)c.length||void 0===b?d=d[e]?d[e]:d[e]={}:d[e]=b}function z(a,b){function c(){}c.prototype=b.prototype;a.q=b.prototype;a.prototype=new c};function pa(a){eval("X.DEV === undefined")||window.console.time(a)}function qa(a){eval("X.DEV === undefined")||window.console.timeEnd(a)}var ra=window.Zb;
Function.prototype.bind||(Function.prototype.bind=function(a){function b(){return f.apply(this instanceof c?this:a||window,e.concat(d.call(arguments)))}function c(){}if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var d=Array.prototype.slice,e=d.call(arguments,1),f=this;c.prototype=this.prototype;b.prototype=new c;return b});
"slice"in ArrayBuffer.prototype||(ArrayBuffer.prototype.slice=function(a,b){if(void 0===a)throw Error("Not enough arguments.");var c=b||this.byteLength;0>a&&(a=this.byteLength+a);0>c&&(c=this.byteLength+c);c<a&&(c=a=0);0>a&&(a=0);0>c&&(c=0);a>this.byteLength&&(a=this.byteLength);c>this.byteLength&&(c=this.byteLength);for(var d=new ArrayBuffer(c-a),e=new Uint8Array(this),f=new Uint8Array(d),g=a,k=0;g<c;++g,++k)f[k]=e[g];return d});y("$",ra);y("Function.prototype.bind",Function.prototype.bind);y("X.io.version","0.0.1");y("X.io.uint8",!0);y("X.io.onloading",h());y("X.io.onload",h());y("X.io.onparsing",h());y("X.io.onparse",h());y("X.io.oncomplete",h());function A(){0!=sa&&(this.fc=Error().stack,Fa[w(this)]=this)}var sa=0,Fa={};A.prototype.Ma=!1;A.prototype.W=function(){if(!this.Ma&&(this.Ma=!0,this.f(),0!=sa)){var a=w(this);delete Fa[a]}};A.prototype.f=function(){if(this.ob)for(;this.ob.length;)this.ob.shift()()};var Ga="closure_listenable_"+(1E6*Math.random()|0);function Ha(a){return!(!a||!a[Ga])}var Ia=0;function Ja(a,b,c,d,e,f){this.r=a;this.qb=b;this.src=c;this.type=d;this.capture=!!e;this.P=f;this.key=++Ia;this.o=this.U=!1};function Ka(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function La(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}var Ma="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Na(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<Ma.length;f++)c=Ma[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};var B,Oa,Pa,Qa;function Ra(){return s.navigator?s.navigator.userAgent:null}Qa=Pa=Oa=B=!1;var Sa;if(Sa=Ra()){var Ta=s.navigator;B=0==Sa.indexOf("Opera");Oa=!B&&-1!=Sa.indexOf("MSIE");Pa=!B&&-1!=Sa.indexOf("WebKit");Qa=!B&&!Pa&&"Gecko"==Ta.product}var Ua=B,C=Oa,Va=Qa,D=Pa,Wa=s.navigator,Xa=-1!=(Wa&&Wa.platform||"").indexOf("Mac");function Ya(){var a=s.document;return a?a.documentMode:void 0}var Za;
a:{var $a="",ab;if(Ua&&s.opera)var bb=s.opera.version,$a="function"==typeof bb?bb():bb;else if(Va?ab=/rv\:([^\);]+)(\)|;)/:C?ab=/MSIE\s+([^\);]+)(\)|;)/:D&&(ab=/WebKit\/(\S+)/),ab)var cb=ab.exec(Ra()),$a=cb?cb[1]:"";if(C){var db=Ya();if(db>parseFloat($a)){Za=String(db);break a}}Za=$a}var eb={};
function E(a){var b;if(!(b=eb[a])){b=0;for(var c=String(Za).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),d=String(a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var g=c[f]||"",k=d[f]||"",l=RegExp("(\\d*)(\\D*)","g"),n=RegExp("(\\d*)(\\D*)","g");do{var p=l.exec(g)||["","",""],q=n.exec(k)||["","",""];if(0==p[0].length&&0==q[0].length)break;b=((0==p[1].length?0:parseInt(p[1],10))<(0==q[1].length?0:parseInt(q[1],10))?-1:(0==p[1].length?0:parseInt(p[1],
10))>(0==q[1].length?0:parseInt(q[1],10))?1:0)||((0==p[2].length)<(0==q[2].length)?-1:(0==p[2].length)>(0==q[2].length)?1:0)||(p[2]<q[2]?-1:p[2]>q[2]?1:0)}while(0==b)}b=eb[a]=0<=b}return b}var fb=s.document,gb=fb&&C?Ya()||("CSS1Compat"==fb.compatMode?parseInt(Za,10):5):void 0;var hb;(hb=!C)||(hb=C&&9<=gb);var ib=hb,jb=C&&!E("9");!D||E("528");Va&&E("1.9b")||C&&E("8")||Ua&&E("9.5")||D&&E("528");Va&&!E("8")||C&&E("9");var F=Array.prototype,kb=F.indexOf?function(a,b,c){return F.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(v(a))return v(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},lb=F.forEach?function(a,b,c){F.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=v(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)};
function mb(a){var b;a:{b=nb;for(var c=a.length,d=v(a)?a.split(""):a,e=0;e<c;e++)if(e in d&&b.call(void 0,d[e],e,a)){b=e;break a}b=-1}return 0>b?null:v(a)?a.charAt(b):a[b]}function ob(a){if(!u(a))for(var b=a.length-1;0<=b;b--)delete a[b];a.length=0}function pb(a,b){var c=kb(a,b),d;(d=0<=c)&&F.splice.call(a,c,1);return d};function G(a,b){this.type=a;this.currentTarget=this.target=b}m=G.prototype;m.f=h();m.W=h();m.R=!1;m.defaultPrevented=!1;m.tb=!0;m.preventDefault=function(){this.defaultPrevented=!0;this.tb=!1};function qb(a){qb[" "](a);return a}qb[" "]=ha;function rb(a,b){a&&sb(this,a,b)}z(rb,G);m=rb.prototype;m.target=null;m.relatedTarget=null;m.offsetX=0;m.offsetY=0;m.clientX=0;m.clientY=0;m.screenX=0;m.screenY=0;m.button=0;m.keyCode=0;m.charCode=0;m.ctrlKey=!1;m.altKey=!1;m.shiftKey=!1;m.metaKey=!1;m.Ub=!1;m.pa=null;
function sb(a,b,c){var d=a.type=b.type;G.call(a,d);a.target=b.target||b.srcElement;a.currentTarget=c;if(c=b.relatedTarget){if(Va){var e;a:{try{qb(c.nodeName);e=!0;break a}catch(f){}e=!1}e||(c=null)}}else"mouseover"==d?c=b.fromElement:"mouseout"==d&&(c=b.toElement);a.relatedTarget=c;a.offsetX=D||void 0!==b.offsetX?b.offsetX:b.layerX;a.offsetY=D||void 0!==b.offsetY?b.offsetY:b.layerY;a.clientX=void 0!==b.clientX?b.clientX:b.pageX;a.clientY=void 0!==b.clientY?b.clientY:b.pageY;a.screenX=b.screenX||0;
a.screenY=b.screenY||0;a.button=b.button;a.keyCode=b.keyCode||0;a.charCode=b.charCode||("keypress"==d?b.keyCode:0);a.ctrlKey=b.ctrlKey;a.altKey=b.altKey;a.shiftKey=b.shiftKey;a.metaKey=b.metaKey;a.Ub=Xa?b.metaKey:b.ctrlKey;a.state=b.state;a.pa=b;b.defaultPrevented&&a.preventDefault();delete a.R}m.preventDefault=function(){rb.q.preventDefault.call(this);var a=this.pa;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,jb)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};
m.f=h();var tb={},H={},I={},J={};function K(a,b,c,d,e){if(u(b)){for(var f=0;f<b.length;f++)K(a,b[f],c,d,e);return null}c=ub(c);return Ha(a)?a.Sa(b,c,d,e):vb(a,b,c,!1,d,e)}
function vb(a,b,c,d,e,f){if(!b)throw Error("Invalid event type");e=!!e;var g=H;b in g||(g[b]={d:0,C:0});g=g[b];e in g||(g[e]={d:0,C:0},g.d++);var g=g[e],k=w(a),l;g.C++;if(g[k]){l=g[k];for(var n=0;n<l.length;n++)if(g=l[n],g.r==c&&g.P==f){if(g.o)break;d||(l[n].U=!1);return l[n]}}else l=g[k]=[],g.d++;n=wb();g=new Ja(c,n,a,b,e,f);g.U=d;n.src=a;n.r=g;l.push(g);I[k]||(I[k]=[]);I[k].push(g);a.addEventListener?a.addEventListener(b,n,e):a.attachEvent(b in J?J[b]:J[b]="on"+b,n);return tb[g.key]=g}
function wb(){var a=xb,b=ib?function(c){return a.call(b.src,b.r,c)}:function(c){c=a.call(b.src,b.r,c);if(!c)return c};return b}function yb(a,b,c,d,e){if(u(b)){for(var f=0;f<b.length;f++)yb(a,b[f],c,d,e);return null}c=ub(c);return Ha(a)?a.Ta(b,c,d,e):vb(a,b,c,!0,d,e)}function zb(a,b,c,d,e){if(u(b))for(var f=0;f<b.length;f++)zb(a,b[f],c,d,e);else if(c=ub(c),Ha(a))a.ha(b,c,d,e);else if(d=!!d,a=Ab(a,b,d))for(f=0;f<a.length;f++)if(a[f].r==c&&a[f].capture==d&&a[f].P==e){Bb(a[f]);break}}
function Bb(a){if("number"==typeof a||!a||a.o)return!1;var b=a.src;if(Ha(b))return Cb(b,a);var c=a.type,d=a.qb,e=a.capture;b.removeEventListener?b.removeEventListener(c,d,e):b.detachEvent&&b.detachEvent(c in J?J[c]:J[c]="on"+c,d);b=w(b);I[b]&&(d=I[b],pb(d,a),0==d.length&&delete I[b]);a.o=!0;a.r=null;a.qb=null;a.src=null;a.P=null;if(d=H[c][e][b])d.nb=!0,Db(c,e,b,d);delete tb[a.key];return!0}
function Db(a,b,c,d){if(!d.va&&d.nb){for(var e=0,f=0;e<d.length;e++)d[e].o||(e!=f&&(d[f]=d[e]),f++);d.length=f;d.nb=!1;0==f&&(delete H[a][b][c],H[a][b].d--,0==H[a][b].d&&(delete H[a][b],H[a].d--),0==H[a].d&&delete H[a])}}function Ab(a,b,c){var d=H;return b in d&&(d=d[b],c in d&&(d=d[c],a=w(a),d[a]))?d[a]:null}
function Eb(a,b,c,d,e){var f=1;b=w(b);if(a[b]){var g=--a.C,k=a[b];k.va?k.va++:k.va=1;try{for(var l=k.length,n=0;n<l;n++){var p=k[n];p&&!p.o&&(f&=!1!==Fb(p,e))}}finally{a.C=Math.max(g,a.C),k.va--,Db(c,d,b,k)}}return Boolean(f)}function Fb(a,b){var c=a.r,d=a.P||a.src;a.U&&Bb(a);return c.call(d,b)}
function xb(a,b){if(a.o)return!0;var c=a.type,d=H;if(!(c in d))return!0;var d=d[c],e,f;if(!ib){var g;if(!(g=b))a:{g=["window","event"];for(var k=s;e=g.shift();)if(null!=k[e])k=k[e];else{g=null;break a}g=k}e=g;g=!0 in d;k=!1 in d;if(g){if(0>e.keyCode||void 0!=e.returnValue)return!0;a:{var l=!1;if(0==e.keyCode)try{e.keyCode=-1;break a}catch(n){l=!0}if(l||void 0==e.returnValue)e.returnValue=!0}}l=new rb;sb(l,e,this);e=!0;try{if(g){for(var p=[],q=l.currentTarget;q;q=q.parentNode)p.push(q);f=d[!0];f.C=
f.d;for(var r=p.length-1;!l.R&&0<=r&&f.C;r--)l.currentTarget=p[r],e&=Eb(f,p[r],c,!0,l);if(k)for(f=d[!1],f.C=f.d,r=0;!l.R&&r<p.length&&f.C;r++)l.currentTarget=p[r],e&=Eb(f,p[r],c,!1,l)}else e=Fb(a,l)}finally{p&&(p.length=0)}return e}c=new rb(b,this);return e=Fb(a,c)}var Gb="__closure_events_fn_"+(1E9*Math.random()>>>0);function ub(a){return"function"==ia(a)?a:a[Gb]||(a[Gb]=function(b){return a.handleEvent(b)})};function L(){A.call(this);this.n={};this.zb=this}z(L,A);L.prototype[Ga]=!0;m=L.prototype;m.Va=null;m.addEventListener=function(a,b,c,d){K(this,a,b,c,d)};m.removeEventListener=function(a,b,c,d){zb(this,a,b,c,d)};
m.dispatchEvent=function(a){var b,c=this.Va;if(c)for(b=[];c;c=c.Va)b.push(c);var c=this.zb,d=a.type||a;if(v(a))a=new G(a,c);else if(a instanceof G)a.target=a.target||c;else{var e=a;a=new G(d,c);Na(a,e)}var e=!0,f;if(b)for(var g=b.length-1;!a.R&&0<=g;g--)f=a.currentTarget=b[g],e=Hb(f,d,!0,a)&&e;a.R||(f=a.currentTarget=c,e=Hb(f,d,!0,a)&&e,a.R||(e=Hb(f,d,!1,a)&&e));if(b)for(g=0;!a.R&&g<b.length;g++)f=a.currentTarget=b[g],e=Hb(f,d,!1,a)&&e;return e};
m.f=function(){L.q.f.call(this);var a=0,b;for(b in this.n){for(var c=this.n[b],d=0;d<c.length;d++)++a,delete tb[c[d].key],c[d].o=!0;c.length=0}this.Va=null};m.Sa=function(a,b,c,d){return Ib(this,a,b,!1,c,d)};m.Ta=function(a,b,c,d){return Ib(this,a,b,!0,c,d)};function Ib(a,b,c,d,e,f){var g=a.n[b]||(a.n[b]=[]),k=Jb(g,c,e,f);if(-1<k)return a=g[k],d||(a.U=!1),a;a=new Ja(c,null,a,b,!!e,f);a.U=d;g.push(a);return a}
m.ha=function(a,b,c,d){if(!(a in this.n))return!1;a=this.n[a];b=Jb(a,b,c,d);return-1<b?(c=a[b],delete tb[c.key],c.o=!0,1==F.splice.call(a,b,1).length):!1};function Cb(a,b){var c=b.type;if(!(c in a.n))return!1;if(c=pb(a.n[c],b))delete tb[b.key],b.o=!0;return c}
function Hb(a,b,c,d){if(!(b in a.n))return!0;var e=!0;b=a.n[b];var f=b.length;if(0<f){for(var g=Array(f),k=0;k<f;k++)g[k]=b[k];b=g}else b=[];for(f=0;f<b.length;++f)if((g=b[f])&&!g.o&&g.capture==c){var k=g.r,l=g.P||g.src;g.U&&Cb(a,g);e=!1!==k.call(l,d)&&e}return e&&!1!=d.tb}function Jb(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(f.r==b&&f.capture==!!c&&f.P==d)return e}return-1};function Kb(){L.call(this);this.D="io.base";this.L=0;this.Ya=!1}z(Kb,L);Object.defineProperty(Kb.prototype,"classname",{get:aa("D")});Object.defineProperty(Kb.prototype,"id",{get:aa("L")});Object.defineProperty(Kb.prototype,"dirty",{get:aa("Ya"),set:function(a){this.Ya=a}});function Lb(a){G.call(this,a);this.D="event"}z(Lb,G);function Mb(a,b){Lb.call(this,"a");this.yb=b;this.M=a}z(Mb,Lb);function Nb(a){Lb.call(this,"b");this.M=a}z(Nb,Lb);function Ob(){Kb.call(this);this.D="io.parser";this.F=null;this.ja=0;this.wb=0<(new Int8Array((new Int16Array([1])).buffer))[0];this.vb=!0;this.bc=-Infinity;this.ac=Infinity}z(Ob,Kb);Ob.prototype.parse=function(){throw Error("The function parse() should be overloaded.");};
function M(a,b,c){null!=c||(c=1);var d=1,e=Uint8Array;switch(b){case "schar":e=Int8Array;break;case "ushort":e=Uint16Array;d=2;break;case "sshort":e=Int16Array;d=2;break;case "uint":e=Uint32Array;d=4;break;case "sint":e=Int32Array;d=4;break;case "float":e=Float32Array;d=4;break;case "complex":e=Float64Array;d=8;break;case "double":e=Float64Array,d=8}b=new e(a.F.slice(a.ja,a.ja+=c*d));if(a.wb!=a.vb){a=b;b=new Uint8Array(a.buffer,a.byteOffset,a.byteLength);for(e=0;e<a.byteLength;e+=d)for(var f=e+d-
1,g=e;f>g;f--,g++){var k=b[g];b[g]=b[f];b[f]=k}b=a}return 1==c?b[0]:b}function Pb(a){for(var b=a.length,c=Infinity,d=-Infinity,e=a.length,f=0,f=0;f<e;f++)var g=a[f],c=Math.min(c,g),d=Math.max(d,g);c=d;d=new Uint8Array(b);for(e=0;e<b;e++)d[e]=255*(a[e]/c);return d}function Qb(a,b,c){pa(a.D+".reslice");for(var d=b[0]*b[1],e=Array(b[2]),f=0,f=0;f<b[2];f++)e[f]=c.buffer.slice(f*d,(f+1)*d);qa(a.D+".reslice");return e};function Rb(a,b,c){var d="number"===typeof b?b:b=0,e="number"===typeof c?c:a.length;c=-1;for(d=e&7;d--;++b)c=c>>>8^N[(c^a[b])&255];for(d=e>>3;d--;b+=8)c=c>>>8^N[(c^a[b])&255],c=c>>>8^N[(c^a[b+1])&255],c=c>>>8^N[(c^a[b+2])&255],c=c>>>8^N[(c^a[b+3])&255],c=c>>>8^N[(c^a[b+4])&255],c=c>>>8^N[(c^a[b+5])&255],c=c>>>8^N[(c^a[b+6])&255],c=c>>>8^N[(c^a[b+7])&255];return(c^4294967295)>>>0}
var N=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,
3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,
366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,
3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,
1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,
1088359270,936918E3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]);function Sb(a){var b=a.length,c=0,d=Number.POSITIVE_INFINITY,e,f,g,k,l,n,p,q,r;for(q=0;q<b;++q)a[q]>c&&(c=a[q]),a[q]<d&&(d=a[q]);e=1<<c;f=new Uint32Array(e);g=1;k=0;for(l=2;g<=c;){for(q=0;q<b;++q)if(a[q]===g){n=0;p=k;for(r=0;r<g;++r)n=n<<1|p&1,p>>=1;for(r=n;r<e;r+=l)f[r]=g<<16|q;++k}++g;k<<=1;l<<=1}return[f,c,d]};function Tb(a,b){this.Ea=[];this.Fa=32768;this.m=this.da=this.h=this.Wa=0;this.input=new Uint8Array(a);this.$a=!1;this.Ga=Ub;this.sb=!1;if(b||!(b={}))b.index&&(this.h=b.index),b.bufferSize&&(this.Fa=b.bufferSize),b.bufferType&&(this.Ga=b.bufferType),b.resize&&(this.sb=b.resize);switch(this.Ga){case Vb:this.c=32768;this.j=new Uint8Array(32768+this.Fa+258);break;case Ub:this.c=0;this.j=new Uint8Array(this.Fa);this.O=this.Ib;this.cb=this.Cb;this.Ja=this.Fb;break;default:throw Error("invalid inflate mode");
}}var Vb=0,Ub=1;
Tb.prototype.Ka=function(){for(;!this.$a;){var a=O(this,3);a&1&&(this.$a=!0);a>>>=1;switch(a){case 0:var a=this.input,b=this.h,c=this.j,d=this.c,e=void 0,f=void 0,g=void 0,k=c.length,e=void 0;this.m=this.da=0;e=a[b++];if(void 0===e)throw Error("invalid uncompressed block header: LEN (first byte)");f=e;e=a[b++];if(void 0===e)throw Error("invalid uncompressed block header: LEN (second byte)");f|=e<<8;e=a[b++];if(void 0===e)throw Error("invalid uncompressed block header: NLEN (first byte)");g=e;e=a[b++];
if(void 0===e)throw Error("invalid uncompressed block header: NLEN (second byte)");g|=e<<8;if(f===~g)throw Error("invalid uncompressed block header: length verify");if(b+f>a.length)throw Error("input buffer is broken");switch(this.Ga){case Vb:for(;d+f>c.length;)e=k-d,f-=e,c.set(a.subarray(b,b+e),d),d+=e,b+=e,this.c=d,c=this.O(),d=this.c;break;case Ub:for(;d+f>c.length;)c=this.O({fb:2});break;default:throw Error("invalid inflate mode");}c.set(a.subarray(b,b+f),d);d+=f;this.h=b+=f;this.c=d;this.j=c;
break;case 1:this.Ja(Wb,Xb);break;case 2:Yb(this);break;default:throw Error("unknown BTYPE: "+a);}}return this.cb()};
var $b=new Uint16Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ac=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258]),bc=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0]),cc=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577]),dc=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),ec=new Uint8Array(288),
P,fc;P=0;for(fc=ec.length;P<fc;++P)ec[P]=143>=P?8:255>=P?9:279>=P?7:8;var Wb=Sb(ec),gc=new Uint8Array(30),hc,ic;hc=0;for(ic=gc.length;hc<ic;++hc)gc[hc]=5;var Xb=Sb(gc);function O(a,b){for(var c=a.da,d=a.m,e=a.input,f=a.h,g;d<b;){g=e[f++];if(void 0===g)throw Error("input buffer is broken");c|=g<<d;d+=8}g=c&(1<<b)-1;a.da=c>>>b;a.m=d-b;a.h=f;return g}
function jc(a,b){for(var c=a.da,d=a.m,e=a.input,f=a.h,g=b[0],k=b[1],l;d<k;){l=e[f++];if(void 0===l)break;c|=l<<d;d+=8}e=g[c&(1<<k)-1];g=e>>>16;a.da=c>>g;a.m=d-g;a.h=f;return e&65535}
function Yb(a){function b(a,b,c){var d,e,f;for(f=0;f<a;)switch(d=jc(this,b),d){case 16:for(d=3+O(this,2);d--;)c[f++]=e;break;case 17:for(d=3+O(this,3);d--;)c[f++]=0;e=0;break;case 18:for(d=11+O(this,7);d--;)c[f++]=0;e=0;break;default:e=c[f++]=d}return c}var c=O(a,5)+257,d=O(a,5)+1,e=O(a,4)+4,f=new Uint8Array($b.length),g;for(g=0;g<e;++g)f[$b[g]]=O(a,3);e=Sb(f);f=new Uint8Array(c);g=new Uint8Array(d);a.Ja(Sb(b.call(a,c,e,f)),Sb(b.call(a,d,e,g)))}m=Tb.prototype;
m.Ja=function(a,b){var c=this.j,d=this.c;this.eb=a;for(var e=c.length-258,f,g,k;256!==(f=jc(this,a));)if(256>f)d>=e&&(this.c=d,c=this.O(),d=this.c),c[d++]=f;else for(f-=257,k=ac[f],0<bc[f]&&(k+=O(this,bc[f])),f=jc(this,b),g=cc[f],0<dc[f]&&(g+=O(this,dc[f])),d>=e&&(this.c=d,c=this.O(),d=this.c);k--;)c[d]=c[d++-g];for(;8<=this.m;)this.m-=8,this.h--;this.c=d};
m.Fb=function(a,b){var c=this.j,d=this.c;this.eb=a;for(var e=c.length,f,g,k;256!==(f=jc(this,a));)if(256>f)d>=e&&(c=this.O(),e=c.length),c[d++]=f;else for(f-=257,k=ac[f],0<bc[f]&&(k+=O(this,bc[f])),f=jc(this,b),g=cc[f],0<dc[f]&&(g+=O(this,dc[f])),d+k>e&&(c=this.O(),e=c.length);k--;)c[d]=c[d++-g];for(;8<=this.m;)this.m-=8,this.h--;this.c=d};
m.O=function(){var a=new Uint8Array(this.c-32768),b=this.c-32768,c=this.j;a.set(c.subarray(32768,a.length));this.Ea.push(a);this.Wa+=a.length;c.set(c.subarray(b,b+32768));this.c=32768;return c};m.Ib=function(a){var b=this.input.length/this.h+1|0,c=this.input,d=this.j;a&&("number"===typeof a.fb&&(b=a.fb),"number"===typeof a.Ab&&(b+=a.Ab));2>b?(a=(c.length-this.h)/this.eb[2],a=258*(a/2)|0,a=a<d.length?d.length+a:d.length<<1):a=d.length*b;a=new Uint8Array(a);a.set(d);return this.j=a};
m.cb=function(){var a=0,b=this.j,c=this.Ea,d,e=new Uint8Array(this.Wa+(this.c-32768)),f,g,k,l;if(0===c.length)return this.j.subarray(32768,this.c);f=0;for(g=c.length;f<g;++f)for(d=c[f],k=0,l=d.length;k<l;++k)e[a++]=d[k];f=32768;for(g=this.c;f<g;++f)e[a++]=b[f];this.Ea=[];return this.buffer=e};m.Cb=function(){var a,b=this.c;this.sb?(a=new Uint8Array(b),a.set(this.j.subarray(0,b))):a=this.j.subarray(0,b);return this.buffer=a};new Uint8Array(256);var kc;for(kc=0;256>kc;++kc)for(var lc=kc,mc=7,lc=lc>>>1;lc;lc>>>=1)--mc;var nc=[],Q;for(Q=0;288>Q;Q++)switch(!0){case 143>=Q:nc.push([Q+48,8]);break;case 255>=Q:nc.push([Q-144+400,9]);break;case 279>=Q:nc.push([Q-256+0,7]);break;case 287>=Q:nc.push([Q-280+192,8]);break;default:throw"invalid literal: "+Q;}
var oc=function(){function a(a){switch(!0){case 3===a:return[257,a-3,0];case 4===a:return[258,a-4,0];case 5===a:return[259,a-5,0];case 6===a:return[260,a-6,0];case 7===a:return[261,a-7,0];case 8===a:return[262,a-8,0];case 9===a:return[263,a-9,0];case 10===a:return[264,a-10,0];case 12>=a:return[265,a-11,1];case 14>=a:return[266,a-13,1];case 16>=a:return[267,a-15,1];case 18>=a:return[268,a-17,1];case 22>=a:return[269,a-19,2];case 26>=a:return[270,a-23,2];case 30>=a:return[271,a-27,2];case 34>=a:return[272,
a-31,2];case 42>=a:return[273,a-35,3];case 50>=a:return[274,a-43,3];case 58>=a:return[275,a-51,3];case 66>=a:return[276,a-59,3];case 82>=a:return[277,a-67,4];case 98>=a:return[278,a-83,4];case 114>=a:return[279,a-99,4];case 130>=a:return[280,a-115,4];case 162>=a:return[281,a-131,5];case 194>=a:return[282,a-163,5];case 226>=a:return[283,a-195,5];case 257>=a:return[284,a-227,5];case 258===a:return[285,a-258,0];default:throw"invalid length: "+a;}}var b=[],c,d;for(c=3;258>=c;c++)d=a(c),b[c]=d[2]<<24|
d[1]<<16|d[0];return b}();new Uint32Array(oc);function pc(){};function qc(a){this.input=a;this.h=0;this.lb=[];this.Gb=!1}
qc.prototype.Ka=function(){for(var a=this.input.length;this.h<a;){var b=new pc,c=void 0,d=void 0,e=void 0,f=c=e=void 0,g=void 0,c=c=void 0,k=this.input,d=this.h;b.gb=k[d++];b.hb=k[d++];if(31!==b.gb||139!==b.hb)throw Error("invalid file signature:"+b.gb+","+b.hb);b.ab=k[d++];switch(b.ab){case 8:break;default:throw Error("unknown compression method: "+b.ab);}b.qa=k[d++];c=k[d++]|k[d++]<<8|k[d++]<<16|k[d++]<<24;b.hc=new Date(1E3*c);b.jc=k[d++];b.ic=k[d++];0<(b.qa&4)&&(b.Yb=k[d++]|k[d++]<<8,d+=b.Yb);
if(0<(b.qa&8)){g=[];for(f=0;0<(c=k[d++]);)g[f++]=String.fromCharCode(c);b.name=g.join("")}if(0<(b.qa&16)){g=[];for(f=0;0<(c=k[d++]);)g[f++]=String.fromCharCode(c);b.dc=g.join("")}if(0<(b.qa&2)&&(b.Eb=Rb(k,0,d)&65535,b.Eb!==(k[d++]|k[d++]<<8)))throw Error("invalid header crc16");c=k[k.length-4]|k[k.length-3]<<8|k[k.length-2]<<16|k[k.length-1]<<24;k.length-d-4-4<512*c&&(e=c);d=new Tb(k,{index:d,bufferSize:e});b.data=e=d.Ka();d=d.h;b.ec=c=(k[d++]|k[d++]<<8|k[d++]<<16|k[d++]<<24)>>>0;if(Rb(e,void 0,void 0)!==
c)throw Error("invalid CRC-32 checksum: 0x"+Rb(e,void 0,void 0).toString(16)+" / 0x"+c.toString(16));b.gc=c=(k[d++]|k[d++]<<8|k[d++]<<16|k[d++]<<24)>>>0;if((e.length&4294967295)!==c)throw Error("invalid input size: "+(e.length&4294967295)+" / "+c);this.lb.push(b);this.h=d}this.Gb=!0;a=this.lb;b=e=d=0;for(k=a.length;b<k;++b)e+=a[b].data.length;e=new Uint8Array(e);for(b=0;b<k;++b)e.set(a[b].data,d),d+=a[b].data.length;return e};function R(a){this.length=a.length||a;for(var b=0;b<this.length;b++)this[b]=a[b]||0}R.prototype.BYTES_PER_ELEMENT=8;R.prototype.set=function(a,b){b=b||0;for(var c=0;c<a.length&&b+c<this.length;c++)this[b+c]=a[c]};R.prototype.toString=Array.prototype.join;if("undefined"==typeof Float64Array){try{R.BYTES_PER_ELEMENT=8}catch(rc){}R.prototype.BYTES_PER_ELEMENT=R.prototype.BYTES_PER_ELEMENT;R.prototype.set=R.prototype.set;R.prototype.toString=R.prototype.toString;y("Float64Array",R)};function S(a){this.length=a.length||a;for(var b=0;b<this.length;b++)this[b]=a[b]||0}S.prototype.BYTES_PER_ELEMENT=4;S.prototype.set=function(a,b){b=b||0;for(var c=0;c<a.length&&b+c<this.length;c++)this[b+c]=a[c]};S.prototype.toString=Array.prototype.join;"undefined"==typeof Float32Array&&(S.BYTES_PER_ELEMENT=4,S.prototype.BYTES_PER_ELEMENT=S.prototype.BYTES_PER_ELEMENT,S.prototype.set=S.prototype.set,S.prototype.toString=S.prototype.toString,y("Float32Array",S));function T(a,b,c,d,e,f){a[b]=c;a[b+4]=d;a[b+8]=e;a[b+12]=f}
function sc(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],k=a[5],l=a[6],n=a[7],p=a[8],q=a[9],r=a[10],ba=a[11],ca=a[12],da=a[13],ea=a[14],fa=a[15],ta=c*k-d*g,ua=c*l-e*g,va=c*n-f*g,wa=d*l-e*k,xa=d*n-f*k,ya=e*n-f*l,za=p*da-q*ca,Aa=p*ea-r*ca,Ba=p*fa-ba*ca,Ca=q*ea-r*da,Da=q*fa-ba*da,Ea=r*fa-ba*ea,t=ta*Ea-ua*Da+va*Ca+wa*Ba-xa*Aa+ya*za;0!=t&&(t=1/t,b[0]=(k*Ea-l*Da+n*Ca)*t,b[1]=(-d*Ea+e*Da-f*Ca)*t,b[2]=(da*ya-ea*xa+fa*wa)*t,b[3]=(-q*ya+r*xa-ba*wa)*t,b[4]=(-g*Ea+l*Ba-n*Aa)*t,b[5]=(c*Ea-e*Ba+f*Aa)*t,b[6]=(-ca*
ya+ea*va-fa*ua)*t,b[7]=(p*ya-r*va+ba*ua)*t,b[8]=(g*Da-k*Ba+n*za)*t,b[9]=(-c*Da+d*Ba-f*za)*t,b[10]=(ca*xa-da*va+fa*ta)*t,b[11]=(-p*xa+q*va-ba*ta)*t,b[12]=(-g*Ca+k*Aa-l*za)*t,b[13]=(c*Ca-d*Aa+e*za)*t,b[14]=(-ca*wa+da*ua-ea*ta)*t,b[15]=(p*wa-q*ua+r*ta)*t)}new Float64Array(3);new Float64Array(3);new Float64Array(4);new Float64Array(4);new Float64Array(4);new Float64Array(16);function U(){Ob.call(this);this.D="io.parserNII"}z(U,Ob);
U.prototype.parse=function(a){pa(this.D+".parse");var b=a.k[0].F,c=-1,c="undefined"==typeof DataView?(new Int32Array(b,0,1))[0]:(new DataView(b,0)).getInt32(0,!0);348!=c&&(b=(new qc(new Uint8Array(b))).Ka(),b=b.buffer);this.F=b;this.dispatchEvent(new Mb(a,20));b={sizeof_hdr:M(this,"uint"),data_type:M(this,"uchar",10),db_name:M(this,"uchar",18),extents:M(this,"uint"),session_error:M(this,"ushort"),regular:M(this,"uchar"),dim_info:M(this,"uchar"),dim:M(this,"ushort",8),intent_p1:M(this,"float"),intent_p2:M(this,
"float"),intent_p3:M(this,"float"),intent_code:M(this,"ushort"),datatype:M(this,"ushort"),bitpix:M(this,"ushort"),slice_start:M(this,"ushort"),pixdim:M(this,"float",8),vox_offset:M(this,"float"),scl_slope:M(this,"float"),scl_inter:M(this,"float"),slice_end:M(this,"ushort"),slice_code:M(this,"uchar"),xyzt_units:M(this,"uchar"),cal_max:M(this,"float"),cal_min:M(this,"float"),slice_duration:M(this,"float"),toffset:M(this,"float"),glmax:M(this,"uint",1),glmin:M(this,"uint",1),descrip:M(this,"uchar",80),
aux_file:M(this,"uchar",24),qform_code:M(this,"ushort"),sform_code:M(this,"ushort"),quatern_b:M(this,"float"),quatern_c:M(this,"float"),quatern_d:M(this,"float"),qoffset_x:M(this,"float"),qoffset_y:M(this,"float"),qoffset_z:M(this,"float"),srow_x:M(this,"float",4),srow_y:M(this,"float",4),srow_z:M(this,"float",4),intent_name:M(this,"uchar",16),magic:M(this,"uchar",4)};this.dispatchEvent(new Mb(a,20));c=tc(this,b);eval("X.io.uint8")&&(c=Pb(c));this.dispatchEvent(new Mb(a,20));var d=uc(b),e=new Float32Array(16);
sc(d,e);c=Qb(this,b.dim.subarray(1,4),c);this.dispatchEvent(new Mb(a,40));a.F={header:b,data:{image:c}};qa(this.D+".parse");this.dispatchEvent(new Nb(a))};
function tc(a,b){var c=null;a.ja=parseInt(b.vox_offset,10);c=b.dim[1]*b.dim[2]*b.dim[3];switch(b.datatype){case 2:c=M(a,"uchar",c);break;case 4:c=M(a,"sshort",c);break;case 8:c=M(a,"sint",c);break;case 16:c=M(a,"float",c);break;case 32:c=M(a,"complex",c);break;case 64:c=M(a,"double",c);break;case 256:c=M(a,"schar",c);break;case 512:c=M(a,"ushort",c);break;case 768:c=M(a,"uint",c);break;default:throw Error("Unsupported NII data type: "+b.datatype);}return c}
function uc(a){var b=new Float32Array(16);b[0]=b[5]=b[10]=b[15]=1;var c=[];if(0==a.qform_code)T(b,0,a.pixdim[1],0,0,0),T(b,0,0,a.pixdim[2],0,0),T(b,0,0,0,a.pixdim[3],0),c.push(a.pixdim[1]),c.push(0),c.push(0),c.push(0),c.push(a.pixdim[2]),c.push(0),c.push(0),c.push(0),c.push(a.pixdim[3]);else if(0<a.qform_code){var d=0,e=a.quatern_b,f=a.quatern_c,g=a.quatern_d,k=1,l=1,n=1,p=a.qoffset_x,q=a.qoffset_y,r=a.qoffset_z,d=1-(e*e+f*f+g*g);1E-7>d?(d=1/Math.sqrt(e*e+f*f+g*g),e*=d,f*=d,g*=d,d=0):d=Math.sqrt(d);
0<a.pixdim[1]&&(k=a.pixdim[1]);0<a.pixdim[2]&&(l=a.pixdim[2]);0<a.pixdim[2]&&(n=a.pixdim[3]);0>a.pixdim[0]&&(n=-n);T(b,0,(d*d+e*e-f*f-g*g)*k,2*(e*f-d*g)*l,2*(e*g+d*f)*n,p);T(b,1,2*(e*f+d*g)*k,(d*d+f*f-e*e-g*g)*l,2*(f*g-d*e)*n,q);T(b,2,2*(e*g-d*f)*k,2*(f*g+d*e)*l,(d*d+g*g-f*f-e*e)*n,r);c.push((d*d+e*e-f*f-g*g)*k);c.push(2*(e*f+d*g)*k);c.push(2*(e*g+d*f)*n);c.push(2*(e*f-d*g)*l);c.push((d*d+f*f-e*e-g*g)*l);c.push(2*(f*g-d*e)*n);c.push(2*(e*g+d*f)*n);c.push(2*(f*g+d*e)*l);c.push((d*d+g*g-f*f-e*e)*n)}else 0<
a.sform_code&&(c=a.srow_x,d=a.srow_y,a=a.srow_z,T(b,0,c[0],c[1],c[2],c[3]),T(b,0,d[0],d[1],d[2],d[3]),T(b,0,a[0],a[1],a[2],a[3]));return b}y("X.io.parserNII",U);y("X.io.parserNII.prototype.parse",U.prototype.parse);function vc(a,b){this.M=a;this.cc=b;this.i=this.H=this.l=0;this.F=null};var wc="StopIteration"in s?s.StopIteration:Error("StopIteration");function xc(){}xc.prototype.next=function(){throw wc;};xc.prototype.t=function(){return this};function yc(a){if(a instanceof xc)return a;if("function"==typeof a.t)return a.t(!1);if(ja(a)){var b=0,c=new xc;c.next=function(){for(;;){if(b>=a.length)throw wc;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function zc(a,b){if(ja(a))try{lb(a,b,void 0)}catch(c){if(c!==wc)throw c;}else{a=yc(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(d){if(d!==wc)throw d;}}};function V(a,b){this.e={};this.b=[];var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.Da(a)}m=V.prototype;m.d=0;m.ia=0;m.g=aa("d");m.w=function(){Ac(this);for(var a=[],b=0;b<this.b.length;b++)a.push(this.e[this.b[b]]);return a};m.X=function(){Ac(this);return this.b.concat()};m.J=function(){return 0==this.d};m.clear=function(){this.e={};this.ia=this.d=this.b.length=0};
m.remove=function(a){return Object.prototype.hasOwnProperty.call(this.e,a)?(delete this.e[a],this.d--,this.ia++,this.b.length>2*this.d&&Ac(this),!0):!1};function Ac(a){if(a.d!=a.b.length){for(var b=0,c=0;b<a.b.length;){var d=a.b[b];Object.prototype.hasOwnProperty.call(a.e,d)&&(a.b[c++]=d);b++}a.b.length=c}if(a.d!=a.b.length){for(var e={},c=b=0;b<a.b.length;)d=a.b[b],Object.prototype.hasOwnProperty.call(e,d)||(a.b[c++]=d,e[d]=1),b++;a.b.length=c}}
m.get=function(a,b){return Object.prototype.hasOwnProperty.call(this.e,a)?this.e[a]:b};m.set=function(a,b){Object.prototype.hasOwnProperty.call(this.e,a)||(this.d++,this.b.push(a),this.ia++);this.e[a]=b};m.Da=function(a){var b;a instanceof V?(b=a.X(),a=a.w()):(b=La(a),a=Ka(a));for(var c=0;c<b.length;c++)this.set(b[c],a[c])};m.na=function(){return new V(this)};
m.t=function(a){Ac(this);var b=0,c=this.b,d=this.e,e=this.ia,f=this,g=new xc;g.next=function(){for(;;){if(e!=f.ia)throw Error("The map has changed since the iterator was created");if(b>=c.length)throw wc;var g=c[b++];return a?g:d[g]}};return g};function Bc(a,b,c){this.L=a;this.$b=b;this.xb=c;this.l=0;this.k=[];this.F=null;this.u=this.H=this.i=0};function Cc(a){A.call(this);this.Oa=a;this.b={}}z(Cc,A);var Dc=[];m=Cc.prototype;m.Sa=function(a,b,c,d,e){u(b)||(Dc[0]=b,b=Dc);for(var f=0;f<b.length;f++){var g=K(a,b[f],c||this,d||!1,e||this.Oa||this);this.b[g.key]=g}return this};m.Ta=function(a,b,c,d,e){if(u(b))for(var f=0;f<b.length;f++)this.Ta(a,b[f],c,d,e);else a=yb(a,b,c||this,d,e||this.Oa||this),this.b[a.key]=a;return this};
m.ha=function(a,b,c,d,e){if(u(b))for(var f=0;f<b.length;f++)this.ha(a,b[f],c,d,e);else{a:if(e=e||this.Oa||this,d=!!d,c=ub(c||this),Ha(a))a=a.n[b],b=-1,a&&(b=Jb(a,c,d,e)),e=-1<b?a[b]:null;else{if(a=Ab(a,b,d))for(b=0;b<a.length;b++)if(!a[b].o&&a[b].r==c&&a[b].capture==d&&a[b].P==e){e=a[b];break a}e=null}e&&(Bb(e),delete this.b[e.key])}return this};m.rb=function(){var a=this.b,b=Bb,c;for(c in a)b.call(void 0,a[c],c,a);this.b={}};m.f=function(){Cc.q.f.call(this);this.rb()};
m.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented");};function Ec(a){if("function"==typeof a.w)return a.w();if(v(a))return a.split("");if(ja(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return Ka(a)}function Fc(a,b,c){if("function"==typeof a.forEach)a.forEach(b,c);else if(ja(a)||v(a))lb(a,b,c);else{var d;if("function"==typeof a.X)d=a.X();else if("function"!=typeof a.w)if(ja(a)||v(a)){d=[];for(var e=a.length,f=0;f<e;f++)d.push(f)}else d=La(a);else d=void 0;for(var e=Ec(a),f=e.length,g=0;g<f;g++)b.call(c,e[g],d&&d[g],a)}};var Gc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$"),Hc=D;function Ic(a,b){if(Hc){Hc=!1;var c=s.location;if(c){var d=c.href;if(d&&(d=(d=Ic(3,d))&&decodeURIComponent(d))&&d!=c.hostname)throw Hc=!0,Error();}}return b.match(Gc)[a]||null};function Jc(){}Jc.prototype.ma=null;var Kc;function Lc(){}z(Lc,Jc);function Mc(a){return(a=Nc(a))?new ActiveXObject(a):new XMLHttpRequest}function Oc(a){var b={};Nc(a)&&(b[0]=!0,b[1]=!0);return b}
function Nc(a){if(!a.ib&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;c<b.length;c++){var d=b[c];try{return new ActiveXObject(d),a.ib=d}catch(e){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed");}return a.ib}Kc=new Lc;function Pc(a){this.e=new V;a&&this.Da(a)}function Qc(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+w(a):b.substr(0,1)+a}m=Pc.prototype;m.g=function(){return this.e.g()};m.add=function(a){this.e.set(Qc(a),a)};m.Da=function(a){a=Ec(a);for(var b=a.length,c=0;c<b;c++)this.add(a[c])};m.rb=function(a){a=Ec(a);for(var b=a.length,c=0;c<b;c++)this.remove(a[c])};m.remove=function(a){return this.e.remove(Qc(a))};m.clear=function(){this.e.clear()};m.J=function(){return this.e.J()};m.w=function(){return this.e.w()};
m.na=function(){return new Pc(this)};m.t=function(){return this.e.t(!1)};function Rc(){};function Sc(a){L.call(this);this.headers=new V;this.ba=a||null;this.I=!1;this.Ba=this.a=null;this.kb=this.ua="";this.Y=0;this.fa="";this.Q=this.Qa=this.ta=this.Na=!1;this.K=0;this.T=null;this.Z=Tc;this.Xb=!1}z(Sc,L);var Tc="",Uc=/^https?$/i,Vc=["POST","PUT"];m=Sc.prototype;m.ub=function(a){this.K=Math.max(0,a)};
m.send=function(a,b,c,d){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.ua+"; newUri="+a);b=b?b.toUpperCase():"GET";this.ua=a;this.fa="";this.Y=0;this.kb=b;this.Na=!1;this.I=!0;this.a=this.ba?Mc(this.ba):Mc(Kc);this.Ba=this.ba?this.ba.ma||(this.ba.ma=Oc(this.ba)):Kc.ma||(Kc.ma=Oc(Kc));this.a.onreadystatechange=x(this.pb,this);try{Rc(W(this,"Opening Xhr")),this.Qa=!0,this.a.open(b,a,!0),this.Qa=!1}catch(e){Rc(W(this,"Error opening Xhr: "+e.message));Wc(this,e);
return}a=c||"";var f=this.headers.na();d&&Fc(d,function(a,b){f.set(b,a)});d=mb(f.X());c=s.FormData&&a instanceof s.FormData;!(0<=kb(Vc,b))||(d||c)||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");Fc(f,function(a,b){this.a.setRequestHeader(b,a)},this);this.Z&&(this.a.responseType=this.Z);"withCredentials"in this.a&&(this.a.withCredentials=this.Xb);try{this.T&&(s.clearTimeout(this.T),this.T=null),0<this.K&&(Rc(W(this,"Will abort after "+this.K+"ms if incomplete")),this.T=s.setTimeout(x(this.Vb,
this),this.K)),Rc(W(this,"Sending request")),this.ta=!0,this.a.send(a),this.ta=!1}catch(g){Rc(W(this,"Send error: "+g.message)),Wc(this,g)}};function nb(a){return"content-type"==a.toLowerCase()}m.Vb=function(){"undefined"!=typeof ga&&this.a&&(this.fa="Timed out after "+this.K+"ms, aborting",this.Y=8,W(this,this.fa),this.dispatchEvent("timeout"),this.abort(8))};function Wc(a,b){a.I=!1;a.a&&(a.Q=!0,a.a.abort(),a.Q=!1);a.fa=b;a.Y=5;Xc(a);Yc(a)}
function Xc(a){a.Na||(a.Na=!0,a.dispatchEvent("complete"),a.dispatchEvent("error"))}m.abort=function(a){this.a&&this.I&&(W(this,"Aborting"),this.I=!1,this.Q=!0,this.a.abort(),this.Q=!1,this.Y=a||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Yc(this))};m.f=function(){this.a&&(this.I&&(this.I=!1,this.Q=!0,this.a.abort(),this.Q=!1),Yc(this,!0));Sc.q.f.call(this)};m.pb=function(){this.Qa||this.ta||this.Q?Zc(this):this.Mb()};m.Mb=function(){Zc(this)};
function Zc(a){if(a.I&&"undefined"!=typeof ga)if(a.Ba[1]&&4==$c(a)&&2==ad(a))W(a,"Local request error detected and ignored");else if(a.ta&&4==$c(a))s.setTimeout(x(a.pb,a),0);else if(a.dispatchEvent("readystatechange"),4==$c(a)){W(a,"Request complete");a.I=!1;try{if(bd(a))a.dispatchEvent("complete"),a.dispatchEvent("success");else{a.Y=6;var b;try{b=2<$c(a)?a.a.statusText:""}catch(c){b=""}a.fa=b+" ["+ad(a)+"]";Xc(a)}}finally{Yc(a)}}}
function Yc(a,b){if(a.a){var c=a.a,d=a.Ba[0]?ha:null;a.a=null;a.Ba=null;a.T&&(s.clearTimeout(a.T),a.T=null);b||a.dispatchEvent("ready");try{c.onreadystatechange=d}catch(e){}}}function bd(a){var b=ad(a),c;a:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:c=!0;break a;default:c=!1}if(!c){if(b=0===b)a=Ic(1,String(a.ua)),!a&&self.location&&(a=self.location.protocol,a=a.substr(0,a.length-1)),b=!Uc.test(a?a.toLowerCase():"");c=b}return c}
function $c(a){return a.a?a.a.readyState:0}function ad(a){try{return 2<$c(a)?a.a.status:-1}catch(b){return-1}}function cd(a){try{if(!a.a)return null;if("response"in a.a)return a.a.response;switch(a.Z){case Tc:case "text":return a.a.responseText;case "arraybuffer":if("mozResponseArrayBuffer"in a.a)return a.a.mozResponseArrayBuffer}return null}catch(b){return null}}function W(a,b){return b+" ["+a.kb+" "+a.ua+" "+ad(a)+"]"};function dd(){this.N=[]}m=dd.prototype;m.A=0;m.S=0;m.oa=function(a){this.N[this.S++]=a};m.V=function(){if(this.A!=this.S){var a=this.N[this.A];delete this.N[this.A];this.A++;return a}};m.g=function(){return this.S-this.A};m.J=function(){return 0==this.S-this.A};m.clear=function(){this.S=this.A=this.N.length=0};m.remove=function(a){a=kb(this.N,a);if(0>a)return!1;a==this.A?this.V():(F.splice.call(this.N,a,1),this.S--);return!0};m.w=function(){return this.N.slice(this.A,this.S)};function ed(a,b){A.call(this);this.mb=a||0;this.wa=b||10;if(this.mb>this.wa)throw Error(fd);this.v=new dd;this.B=new Pc;this.La=0;this.Ra=null;this.ka()}z(ed,A);var fd="[goog.structs.Pool] Min can not be greater than max";m=ed.prototype;m.ra=function(){var a=oa();if(!(null!=this.Ra&&a-this.Ra<this.La)){for(var b;0<this.v.g()&&(b=this.v.V(),!this.Ua(b));)this.ka();!b&&this.g()<this.wa&&(b=this.Ia());b&&(this.Ra=a,this.B.add(b));return b}};
m.ca=function(a){this.B.remove(a);this.Ua(a)&&this.g()<this.wa?this.v.oa(a):gd(a)};m.ka=function(){for(var a=this.v;this.g()<this.mb;)a.oa(this.Ia());for(;this.g()>this.wa&&0<this.v.g();)gd(a.V())};m.Ia=function(){return{}};function gd(a){if("function"==typeof a.W)a.W();else for(var b in a)a[b]=null}m.Ua=function(a){return"function"==typeof a.Bb?a.Bb():!0};m.g=function(){return this.v.g()+this.B.g()};m.J=function(){return this.v.J()&&this.B.J()};
m.f=function(){ed.q.f.call(this);if(0<this.B.g())throw Error("[goog.structs.Pool] Objects not released");delete this.B;for(var a=this.v;!a.J();)gd(a.V());delete this.v};function hd(a,b){this.jb=a;this.Xa=b}hd.prototype.getKey=aa("jb");hd.prototype.na=function(){return new hd(this.jb,this.Xa)};function id(a){this.s=[];if(a)a:{var b,c;if(a instanceof id){if(b=a.X(),c=a.w(),0>=a.g()){a=this.s;for(var d=0;d<b.length;d++)a.push(new hd(b[d],c[d]));break a}}else b=La(a),c=Ka(a);for(d=0;d<b.length;d++)jd(this,b[d],c[d])}}function jd(a,b,c){var d=a.s;d.push(new hd(b,c));b=d.length-1;a=a.s;for(c=a[b];0<b;)if(d=b-1>>1,a[d].getKey()>c.getKey())a[b]=a[d],b=d;else break;a[b]=c}m=id.prototype;
m.remove=function(){var a=this.s,b=a.length,c=a[0];if(!(0>=b)){if(1==b)ob(a);else{a[0]=a.pop();for(var a=0,b=this.s,d=b.length,e=b[a];a<d>>1;){var f=2*a+1,g=2*a+2,f=g<d&&b[g].getKey()<b[f].getKey()?g:f;if(b[f].getKey()>e.getKey())break;b[a]=b[f];a=f}b[a]=e}return c.Xa}};m.w=function(){for(var a=this.s,b=[],c=a.length,d=0;d<c;d++)b.push(a[d].Xa);return b};m.X=function(){for(var a=this.s,b=[],c=a.length,d=0;d<c;d++)b.push(a[d].getKey());return b};m.na=function(){return new id(this)};m.g=function(){return this.s.length};
m.J=function(){return 0==this.s.length};m.clear=function(){ob(this.s)};function kd(){id.call(this)}z(kd,id);kd.prototype.oa=function(a,b){jd(this,a,b)};kd.prototype.V=function(){return this.remove()};function Y(a,b){this.ya=new kd;ed.call(this,a,b)}z(Y,ed);m=Y.prototype;m.ra=function(a,b){if(!a){var c=Y.q.ra.call(this);c&&this.La&&(this.Hb=s.setTimeout(x(this.sa,this),this.La));return c}this.ya.oa(void 0!==b?b:100,a);this.sa()};m.sa=function(){for(var a=this.ya;0<a.g();){var b=this.ra();if(b)a.V().apply(this,[b]);else break}};m.ca=function(a){Y.q.ca.call(this,a);this.sa()};m.ka=function(){Y.q.ka.call(this);this.sa()};
m.f=function(){Y.q.f.call(this);s.clearTimeout(this.Hb);this.ya.clear();this.ya=null};function ld(a,b,c){Y.call(this,b,c);this.Pa=a}z(ld,Y);ld.prototype.Ia=function(){var a=new Sc,b=this.Pa;b&&Fc(b,function(b,d){a.headers.set(d,b)});return a};ld.prototype.Ua=function(a){return!a.Ma&&!a.a};function md(a,b,c,d,e){L.call(this);this.ga=void 0!==a?a:1;this.K=void 0!==e?Math.max(0,e):0;this.aa=new ld(b,c,d);this.p=new V;this.ea=new Cc(this)}z(md,L);var nd="ready complete success error abort timeout".split(" ");m=md.prototype;m.ub=function(a){this.K=Math.max(0,a)};m.send=function(a,b,c,d,e,f,g,k,l){if(this.p.get(a))throw Error("[goog.net.XhrManager] ID in use");b=new od(b,x(this.Kb,this,a),c,d,e,g,void 0!==k?k:this.ga,l);this.p.set(a,b);a=x(this.Jb,this,a);this.aa.ra(a,f);return b};
m.abort=function(a,b){var c=this.p.get(a);if(c){var d=c.$;c.Za=!0;b&&(d&&(this.ea.ha(d,nd,c.Aa),yb(d,"ready",function(){var a=this.aa;a.B.remove(d)&&a.ca(d)},!1,this)),this.p.remove(a));d&&d.abort()}};m.Jb=function(a,b){var c=this.p.get(a);c&&!c.$?(this.ea.Sa(b,nd,c.Aa),b.ub(this.K),b.Z=c.Z,c.$=b,this.dispatchEvent(new pd("ready",this,a,b)),qd(this,a,b),c.Za&&b.abort()):(c=this.aa,c.B.remove(b)&&c.ca(b))};
m.Kb=function(a,b){var c=b.target;switch(b.type){case "ready":qd(this,a,c);break;case "complete":a:{var d=this.p.get(a);if(7==c.Y||bd(c)||d.la>d.ga)if(this.dispatchEvent(new pd("complete",this,a,c)),d&&(d.bb=!0,d.Ha)){c=d.Ha.call(c,b);break a}c=null}return c;case "success":this.dispatchEvent(new pd("success",this,a,c));break;case "timeout":case "error":d=this.p.get(a);d.la>d.ga&&this.dispatchEvent(new pd("error",this,a,c));break;case "abort":this.dispatchEvent(new pd("abort",this,a,c))}return null};
function qd(a,b,c){var d=a.p.get(b);!d||d.bb||d.la>d.ga?(d&&(a.ea.ha(c,nd,d.Aa),a.p.remove(b)),a=a.aa,a.B.remove(c)&&a.ca(c)):(d.la++,c.send(d.Wb,d.Lb,d.Db,d.Pa))}m.f=function(){md.q.f.call(this);this.aa.W();this.aa=null;this.ea.W();this.ea=null;var a=this.p;Fc(a,function(a){a.W()});a.clear();this.p=null};function pd(a,b,c,d){G.call(this,a,b);this.id=c;this.$=d}z(pd,G);
function od(a,b,c,d,e,f,g,k){A.call(this);this.Wb=a;this.Lb=c||"GET";this.Db=d;this.Pa=e||null;this.ga=void 0!==g?g:1;this.la=0;this.Za=this.bb=!1;this.Aa=b;this.Ha=f;this.Z=k||Tc;this.$=null}z(od,A);od.prototype.f=function(){od.q.f.call(this);delete this.Aa;delete this.Ha};var rd={DICOM:{za:"arraybuffer",xa:U},NII:{za:"arraybuffer",xa:U},GZ:{za:"arraybuffer",xa:U},TRK:{za:"arraybuffer",xa:U}};y("X.io.extensions",rd);function Z(){this.Ca=new md;K(this.Ca,"success",Z.prototype.Pb.bind(this));K(this.Ca,"ready",Z.prototype.Ob.bind(this));this.G=new V;this.k=new V;this.u=this.i=0}m=Z.prototype;
m.load=function(a,b){var c=a;u(a)?c=a[0]:a=[a];var d=c.split(".").pop().toUpperCase();null!=b&&(d=b.toUpperCase());if(!(d in rd))throw Error("The "+d+" file format is not supported.");for(var e=new Bc(c,d,rd[d].xa),f=a.length,g=0;g<f;g++){var g=a[g],k=new vc(e,g);this.k.set(g,k);e.k.push(k);this.Ca.send(g,g,void 0,void 0,void 0,void 0,void 0,void 0,rd[d].za)}this.G.set(c,e);return c};m.Ob=function(a){yb(a.$,"readystatechange",Z.prototype.Nb.bind(this,a.id))};
m.Nb=function(a,b){var c=this.k.get(a);c.l=1;c.M.l=1;K(b.target.a,"progress",Z.prototype.Qb.bind(this,a))};m.Qb=function(a,b){var c=this.k.get(a);c.H=b.pa.total;c.i=b.pa.loaded;c=c.M;c.H=0;c.i=0;for(var d=c.k.length,e=0;e<d;e++)e=c.k[e],c.H+=e.H,c.i+=e.i;d=Math.floor(100*(c.i/c.H));eval("X.io.onloading('"+c.L+"',"+d+")");var f=0,g=0,c=this.G.t(!1);zc(c,function(a){f+=a.H;g+=a.i}.bind(this));d=Math.floor(100*(g/f));d>this.i&&(this.i=d,eval("X.io.onloading(null,"+this.i+")"))};
m.Pb=function(a){var b=this.k.get(a.id);b.l=2;b.F=cd(a.$);a=b.M;for(var b=a.k.length,c=0;c<b;c++)if(c=a.k[c],2!=c.l)return;a.l=2;eval("X.io.onload('"+a.L+"')");setTimeout(Z.prototype.Tb.bind(this,a.L),100);var d=!0;a=this.G.t(!1);zc(a,function(a){1==a.l&&(d=!1)}.bind(this));d&&(this.i=0,eval("X.io.onload(null)"))};m.Tb=function(a){a=this.G.get(a);a.l=3;var b=new a.xb;K(b,"a",Z.prototype.Sb.bind(this));yb(b,"b",Z.prototype.Rb.bind(this));setTimeout(b.parse.bind(b,a),100)};
m.Sb=function(a){var b=a.M;b.u+=a.yb;eval("X.io.onparsing('"+b.L+"',"+b.u+")");var c=0;a=this.G.t(!1);zc(a,function(a){c+=a.u}.bind(this));c=Math.floor(c/this.G.g());c>this.u&&(this.u=c,eval("X.io.onparsing(null,"+this.u+")"))};m.Rb=function(a){a=a.M;a.l=4;eval("X.io.onparse('"+a.L+"')");var b=!0;a=this.G.t(!1);zc(a,function(a){4!=a.l&&(b=!1)}.bind(this));b&&(this.u=0,eval("X.io.onparse(null)"),eval("X.io.oncomplete()"))};
m.get=function(a){var b=this.G.get(a);if(!b)throw Error("Job "+a+" could not be found.");if(4!=b.l)throw Error("Job "+a+" is not fully parsed yet.");return b.F};var sd=new Z;y("X.io.load",sd.load.bind(sd));y("X.io.get",sd.get.bind(sd));}).call(this);
